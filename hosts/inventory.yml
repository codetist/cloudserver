all:
  children:
    cloudservers:
      hosts:
        connect:
          vars:
            public_dns_name: "{{ inventory_hostname_short }}.{{ global_domain }}"
            hetzner_dns_zone: "{{ global_domain }}"
            hetzner_dns_record: "{{ inventory_hostname_short }}.{{ global_domain }}"
            hetzner_name: Cloudserver-1
            hetzner_location: fsn1
            hetzner_type: cx22
            hetzner_image: ubuntu-24.04
            hetzner_enable_ipv4: true
            hetzner_enable_ipv6: false
            hetzner_enable_backups: false
            wireguard_subnet: 1
            ## TODO: ip route list default
            public_network_interface: eth0
  vars:
    public_dns_name : "{{ hostvars[inventory_hostname].vars.hetzner_dns_record }}"
    host_domain: "{{ global_domain }}"
    # Host-specific Wireguard configuration
    wireguard_server_net: "10.10.{{ hostvars[inventory_hostname].vars.wireguard_subnet }}"
    wireguard_server_address: "{{ hostvars[inventory_hostname].vars.wireguard_server_net }}.1"
    wireguard_server_net_mask: "{{ hostvars[inventory_hostname].vars.wireguard_server_net }}.0/24"
    # Hosts used for Ansible connections
    ansible_host: "{{ hostvars[inventory_hostname].vars.public_dns_name }}"
    vpn_ansible_host: "{{ wireguard_server_address }}"